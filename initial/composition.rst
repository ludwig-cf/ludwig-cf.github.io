
Initial composition
-------------------

.. contents:: This section describes some available initial coniditions for
              binary fluid composition
   :depth: 1
   :local:
   :backlinks: none

The value of the following input key determins the choice of initial
order parameter :math:`\phi(\mathbf{r}; t=0)`

.. code-block:: none

  phi_initialisation       choice

The available choices are set out below with other relevant input
parameters in each case. Some parameters have default values (where
stated) and may be omitted.


Uniform composition
^^^^^^^^^^^^^^^^^^^

.. code-block:: none

  phi_iniitialisation        uniform
  phi0                       -1.0

The initial order parameter will be set uniformly at all fluid sites
to the specified value :math:`\phi_0`.


Spherical droplet
^^^^^^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation         drop
  phi_init_drop_radius       8.0      # default 8.0 lattice units
  phi_init_drop_amplitude    1.0      # default 1.0

A spherical droplet with radial profile :math:`\phi^\star \tanh (r-r_0)/\xi`
is initialised. The drop radius can be set in the input, while the centre
is always the centre of the system. The amplitude :math:`\phi^\star` may be
positive or negative (the centre of the drop will have
:math:`\phi = -\phi^\star`).

The interfacial width :math:`\xi` will take on the value determined by the
current symmetric free energy parameters.


Emulsion droplets
^^^^^^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation          emulsion
  phi_init_emulsion_ndrops       4
  phi_init_emulsion_radius     4.0       # radius
  phi_init_emulsion_d_centre  12.0       # distance between centres > 2R
  phi_init_emulsion_amplitude  1.0       # phi at drop centres

Intended to initialise an array of small quasi-two-dimensional
droplets (actually cylinders) in the y-z plane. The input specifies
the total number of droplets, their radius, the distance between
the centres and the amplitude :math:`\phi^\star` at the centre.


Block structure
^^^^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation         block

Initialses a configuration with flat interfaces at :math:`z = L_z/4` and
:math:`z = 3L_z/4`. The interfacial width is that set by the current free
energy parameters.

More general configurations are available via

.. code-block:: none

  phi_initialisation         block_X
  phi_init_block_dimension   2.0       # Extent in x-direction
  
.. code-block:: none

  phi_initialisation         block_Y
  phi_init_block_dimension   4.0       # Extent in y-direction

.. code-block:: none

  phi_initialisation         block_Z
  phi_init_block_dimension   10.0      # Extent in x-direction

In each case, the block entends either side of the centre of the
system by half the input value. The interface profile is :math:`\tanh`
with width determined by the current free energy parameters.


Layer structure
^^^^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation         layer_X   # or Y or Z
  phi_init_layer_size        0.2       # 0 < fraction < 1 


Similar to the block initialisation except one specifies a fraction
of the extent in the required dimension for the central layer.


Single interface
^^^^^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation         bath

A special case where a single interface is initialised in the system
system with normal in the z-direction. This is intended for cases
without perioidic boundary conditions (e.g., a box), where this
configuration makes sense.


Random noise
^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation         spinodal    # e.g., for spinodal decomposition
  phi0                       0.0         # mean order parameter
  noise                      0.05        # amplitude
  random_seed                1234567     # random seed

Initialises a uniform field :math:`\phi_0` modulated at each lattice poistion
by a small random
component drawn from a uniform distribution. Different random configurations
may be generated by changing the seed.

This is useful to initiate spinodal decomposition, and mimics the effect of
a quench in temperature in a real system. Here we have no temperature.


Random patches
^^^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation         patches    # random patches
  phi_init_patch_size        4          # patch size lattice units
  phi_init_patch_vol         0.1        # volume fraction minority phase
  random_seed                1234567    # random seed

Initialises random patches in order parameter (value) of a characteristic
size. The total volume fraction of the minority phase (:math:`\phi = -1`)
is also set. Different random configurations can be generated by changing
the seed.

This is intented to allow spinodal decomposition to start in cases where
the composition is far from 50:50. If the simple ``spinodal`` method is
used in such a case, diffusive effects may prevent domains forming. The
larger initial patches promote effective spinodal decomposition.


Composition from file
^^^^^^^^^^^^^^^^^^^^^

.. code-block:: none

  phi_initialisation      from_file

An arbitrary order parameter field may be supplied from file of appropriate
format. See sections on I/O for details.
